# Book Library API

REST API application for a book library built with Laravel. Allows tracking of available books.

## ğŸš€ Quick Start

```bash
git clone https://gitlab.com/binarniy_kot/book-library-api
cd book-library-api
./setup.sh
php artisan serve
```

The `setup.sh` script installs all dependencies (Composer, npm), builds frontend assets (Vite + SCSS), creates `.env`, runs migrations and seeds the database with 20 sample books.

API is available at: http://127.0.0.1:8000

## ğŸ“‹ Requirements

- PHP 8.5+
- Composer
- Node.js 18+ and npm (for frontend: SCSS, Vite)
- SQLite (default) or MySQL (for Docker)

## ğŸ”§ Manual Installation

If you need to run steps individually:

```bash
composer install
npm install
npm run build
cp .env.example .env
php artisan key:generate
touch database/database.sqlite
php artisan migrate:fresh --seed
php artisan serve
```

## ğŸ³ Docker (Laravel Sail)

> **Note:** Sail configures `.env` for MySQL. For local development without Docker, use `cp .env.example .env` (SQLite by default).

### Run with Docker

```bash
# Clone and enter directory
cd book-library-api

# Install dependencies
composer install
npm install
npm run build

# Sail will install MySQL config on first run
# Or copy .env.example for SQLite (local development)
cp .env.example .env
php artisan key:generate

# Start containers (Sail will create .env with MySQL if needed)
./vendor/bin/sail up -d

# Migrations and fixtures
./vendor/bin/sail artisan migrate:fresh --seed
```

API will be available at: http://localhost (port 80)

## ğŸ“š API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/books` | List books (with pagination and search) |
| POST | `/api/books` | Create a book |
| GET | `/api/books/{id}` | Get book by ID |
| PATCH | `/api/books/{id}` | Update a book |
| DELETE | `/api/books/{id}` | Delete a book |

### Parameters for GET /api/books

- `search` - search by title, author or genre
- `per_page` - number of records per page (default: 15, max: 100)

### Book model

| Field | Type | Description |
|-------|------|-------------|
| title | string | Book title |
| publisher | string | Publisher |
| author | string | Author |
| genre | string | Genre |
| publication_date | date | Publication date |
| words_count | integer | Word count |
| price_usd | decimal | Price in USD |

### Example: Create book (POST /api/books)

```json
{
  "title": "The Great Gatsby",
  "publisher": "Scribner",
  "author": "F. Scott Fitzgerald",
  "genre": "Fiction",
  "publication_date": "1925-04-10",
  "words_count": 47000,
  "price_usd": 12.99
}
```

## ğŸ“– Swagger UI / API Documentation

After starting the application, documentation is available at:

- **Swagger UI**: http://127.0.0.1:8000/docs/api
- **OpenAPI JSON**: http://127.0.0.1:8000/docs/api.json

> Documentation is automatically generated by the Scramble package.

## ğŸ§ª Testing

```bash
php artisan test
```

Or with Docker:

```bash
./vendor/bin/sail test
```

## ğŸ¨ Frontend (Vite + SCSS)

- **`resources/scss/welcome.scss`** â€” styles for the welcome page (`/api`)
- **`resources/scss/_variables.scss`** â€” SCSS variables for welcome page
- **`resources/css/app.css`** â€” Tailwind CSS (for other pages if needed)
- **`resources/js/app.js`** â€” main JS entry

Build for production: `npm run build`  
Development with hot reload: `npm run dev`

## ğŸ“ Project Structure

```
app/
â”œâ”€â”€ Contracts/
â”‚   â””â”€â”€ BookRepositoryInterface.php
â”œâ”€â”€ Http/
â”‚   â”œâ”€â”€ Controllers/Api/
â”‚   â”‚   â””â”€â”€ BookController.php
â”‚   â”œâ”€â”€ Requests/
â”‚   â”‚   â”œâ”€â”€ BaseBookRequest.php
â”‚   â”‚   â”œâ”€â”€ BookRequestRules.php
â”‚   â”‚   â”œâ”€â”€ IndexBookRequest.php
â”‚   â”‚   â”œâ”€â”€ StoreBookRequest.php
â”‚   â”‚   â””â”€â”€ UpdateBookRequest.php
â”‚   â””â”€â”€ Responses/
â”‚       â””â”€â”€ ApiResponse.php
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ Book.php
â”œâ”€â”€ Providers/
â”‚   â””â”€â”€ AppServiceProvider.php
â””â”€â”€ Repositories/
    â””â”€â”€ BookRepository.php
config/
â””â”€â”€ books.php
database/
â”œâ”€â”€ factories/
â”‚   â””â”€â”€ BookFactory.php
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ *_create_books_table.php
â””â”€â”€ seeders/
    â”œâ”€â”€ BookSeeder.php
    â””â”€â”€ DatabaseSeeder.php
resources/
â”œâ”€â”€ scss/
â”‚   â”œâ”€â”€ _variables.scss
â”‚   â””â”€â”€ welcome.scss
routes/
â””â”€â”€ api.php
tests/
â”œâ”€â”€ Feature/
â”‚   â”œâ”€â”€ BookApiTest.php
â”‚   â””â”€â”€ ExampleTest.php
â”œâ”€â”€ Unit/
â”‚   â”œâ”€â”€ BookControllerTest.php
â”‚   â””â”€â”€ ExampleTest.php
â””â”€â”€ TestCase.php
```

## ğŸ“¤ Publishing to GitLab

Recommended commits with clear messages:

```
feat: add Laravel 12 REST API for book library
feat: add Book model with migration (title, publisher, author, genre, publication_date, words_count, price_usd)
feat: implement GET/POST/PATCH/DELETE API endpoints for books
feat: add request validation (StoreBookRequest, UpdateBookRequest, IndexBookRequest)
test: add PHPUnit feature and unit tests for Book API (with mocks)
feat: add Swagger UI documentation (Scramble/OpenAPI)
feat: add Docker support via Laravel Sail
feat: add database seeders with fixtures (20 sample books)
docs: add README with setup and run instructions
feat: add automatic setup script (setup.sh)
feat: add per_page validation for list endpoint (max 100)
```

## License

MIT License
